# SQL Server Expert - Query Tuning

## Plano de Execução

[Link para vídeo Plano de Execução](https://youtu.be/kE_2WSTTqoQ?si=QbHVlhyHMCCvurmM)

Veremos neste capítulo como visualizar um Plano de Execução.

Para sabermos se uma query que enviamos ao banco, executou de forma eficiente, se um índice que criei foi utilizado na execução da mesma, para isso precisamos visualizar o Plano de Execução, que nos dará estas informações.

Para nos ajudar nesta análise, temos os seguintes tipos de Plano de Execução:

- Plano de Execução do tipo Texto.
- Plano de Execução do tipo XML.
- Plano de Execução Gráfico.

Vamos a prática, para isso faremos uso da seguinte Query de Demonstração:

![Query utilizada Hands On Plano Execução](src/Query_Tuning_2a_Parte-Plano_de_Execucao.sql)

Nosso Hands On começa mostrando o Plano de Execução em modo Texto, para isso devemos habilitar o `SET STATISTICS PROFILE ON`. Aqui cabe uma observação importante para o comando `SET`, ele é utilizado para configurar a seção e não altera o padrão do servidor ou comportamento das demais conexões.

Ao habilitarmos o `SET STATISTICS PROFILE ON` e rodarmos a query, além de nos dar o resultado da consulta, também teremos um segundo grid com Plano de Execução em modo texto. Um exemplo deste resultado pode ser visto na figura abaixo:

![Resultado query com Plano de Execução em modo Texto]